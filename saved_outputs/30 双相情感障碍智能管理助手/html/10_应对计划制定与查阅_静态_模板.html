html
复制
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>双相情感障碍智能管理助手</title>
    <style>
        :root {
            --primary-color: #0071e3;
            --secondary-color: #5ac8fa;
            --background-color: #f5f7fa;
            --card-color: #ffffff;
            --text-primary: #1d1d1f;
            --text-secondary: #86868b;
            --border-radius: 12px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background-color: var(--primary-color);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            color: white;
            font-weight: bold;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .nav-links {
            display: flex;
            gap: 25px;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--primary-color);
        }

        .main-title {
            font-size: 28px;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        .subtitle {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 30px;
        }

        .card {
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 25px;
            margin-bottom: 30px;
        }

        .card-title {
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
        }

        .card-title svg {
            margin-right: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #d2d2d7;
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: border-color 0.2s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .select-control {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 16px;
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        .btn {
            padding: 12px 24px;
            border-radius: var(--border-radius);
            border: none;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: #0062c3;
        }

        .btn-secondary {
            background-color: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-secondary:hover {
            background-color: rgba(0, 113, 227, 0.1);
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .plan-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
        }

        .section-title svg {
            margin-right: 10px;
            color: var(--primary-color);
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
        }

        .checkbox-item input {
            margin-right: 8px;
        }

        .emergency-contacts {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .contact-card {
            background-color: var(--background-color);
            border-radius: var(--border-radius);
            padding: 15px;
            border: 1px solid #e0e0e0;
        }

        .contact-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .contact-info {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .saved-plan {
            display: none;
            margin-top: 30px;
        }

        .plan-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .plan-item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .plan-item-content {
            color: var(--text-secondary);
        }

        .no-plan {
            text-align: center;
            padding: 40px 0;
            color: var(--text-secondary);
        }

        .tab-container {
            display: flex;
            border-bottom: 1px solid #d2d2d7;
            margin-bottom: 25px;
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        footer {
            text-align: center;
            padding: 30px 0;
            color: var(--text-secondary);
            font-size: 14px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            margin-top: 50px;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .emergency-contacts {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">B</div>
                <div class="logo-text">双相管理助手</div>
            </div>
            <nav class="nav-links">
                <a href="#" class="nav-link">首页</a>
                <a href="#" class="nav-link">情绪追踪</a>
                <a href="#" class="nav-link active">应对计划</a>
                <a href="#" class="nav-link">用药提醒</a>
                <a href="#" class="nav-link">资源中心</a>
            </nav>
        </header>

        <h1 class="main-title">应对计划制定</h1>
        <p class="subtitle">根据您的具体情况制定个性化的应对计划，帮助您在症状出现时采取适当措施</p>

        <div class="tab-container">
            <div class="tab active" onclick="switchTab('create')">创建计划</div>
            <div class="tab" onclick="switchTab('view')">查看计划</div>
        </div>

        <div id="create-plan" class="tab-content active">
            <div class="card">
                <h2 class="card-title">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 8V12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    预警信号识别
                </h2>
                <div class="form-group">
                    <label class="form-label">您通常在躁狂/轻躁狂发作前会出现的预警信号</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="mania_signs" value="睡眠减少"> 睡眠减少
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="mania_signs" value="思维加速"> 思维加速
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="mania_signs" value="话多"> 话多
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="mania_signs" value="冲动行为"> 冲动行为
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="mania_signs" value="过度自信"> 过度自信
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="mania_signs" value="其他"> 其他
                        </label>
                    </div>
                    <textarea class="form-control" placeholder="请描述其他预警信号..." name="mania_other"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">您通常在抑郁发作前会出现的预警信号</label>
                    <div class="checkbox-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="depression_signs" value="睡眠增加"> 睡眠增加
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="depression_signs" value="精力下降"> 精力下降
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="depression_signs" value="兴趣减退"> 兴趣减退
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="depression_signs" value="食欲改变"> 食欲改变
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="depression_signs" value="自我否定"> 自我否定
                        </label>
                        <label class="checkbox-item">
                            <input type="checkbox" name="depression_signs" value="其他"> 其他
                        </label>
                    </div>
                    <textarea class="form-control" placeholder="请描述其他预警信号..." name="depression_other"></textarea>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 21L12 16L5 21V5C5 4.46957 5.21071 3.96086 5.58579 3.58579C5.96086 3.21071 6.46957 3 7 3H17C17.5304 3 18.0391 3.21071 18.4142 3.58579C18.7893 3.96086 19 4.46957 19 5V21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    应对措施
                </h2>
                <div class="plan-section">
                    <h3 class="section-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 19V5M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        躁狂/轻躁狂发作时的应对措施
                    </h3>
                    <div class="form-group">
                        <label class="form-label">当您注意到躁狂预警信号时，应采取的措施</label>
                        <select class="form-control select-control" name="mania_action">
                            <option value="">请选择首要措施</option>
                            <option value="联系医生">立即联系医生/治疗师</option>
                            <option value="调整用药">按照医嘱调整用药</option>
                            <option value="减少刺激">减少环境刺激</option>
                            <option value="避免决定">避免重大决定</option>
                            <option value="其他">其他措施</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">具体行动计划</label>
                        <textarea class="form-control" placeholder="例如：联系家人告知情况，取消非必要社交活动，确保每晚至少6小时睡眠..." name="mania_plan"></textarea>
                    </div>
                </div>

                <div class="plan-section">
                    <h3 class="section-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        抑郁发作时的应对措施
                    </h3>
                    <div class="form-group">
                        <label class="form-label">当您注意到抑郁预警信号时，应采取的措施</label>
                        <select class="form-control select-control" name="depression_action">
                            <option value="">请选择首要措施</option>
                            <option value="联系医生">立即联系医生/治疗师</option>
                            <option value="调整用药">按照医嘱调整用药</option>
                            <option value="轻度活动">安排轻度活动</option>
                            <option value="社交支持">联系信任的人</option>
                            <option value="其他">其他措施</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">具体行动计划</label>
                        <textarea class="form-control" placeholder="例如：每天安排一项简单活动，与朋友约定定期联系，避免孤立自己..." name="depression_plan"></textarea>
                    </div>
                </div>

                <div class="plan-section">
                    <h3 class="section-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22 16.92V19.92C22 20.47 21.55 20.92 21 20.92H19C18.45 20.92 18 20.47 18 19.92V16.92C18 16.37 18.45 15.92 19 15.92H21C21.55 15.92 22 16.37 22 16.92ZM22 9.92001V4.92001C22 4.37001 21.55 3.92001 21 3.92001H19C18.45 3.92001 18 4.37001 18 4.92001V9.92001C18 10.47 18.45 10.92 19 10.92H21C21.55 10.92 22 10.47 22 9.92001Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M14 16.92V19.92C14 20.47 13.55 20.92 13 20.92H3C2.45 20.92 2 20.47 2 19.92V16.92C2 16.37 2.45 15.92 3 15.92H13C13.55 15.92 14 16.37 14 16.92ZM14 4.92001V9.92001C14 10.47 13.55 10.92 13 10.92H3C2.45 10.92 2 10.47 2 9.92001V4.92001C2 4.37001 2.45 3.92001 3 3.92001H13C13.55 3.92001 14 4.37001 14 4.92001Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        放松技巧
                    </h3>
                    <div class="form-group">
                        <label class="form-label">对您有效的放松技巧</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="relaxation" value="深呼吸"> 深呼吸练习
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="relaxation" value="冥想"> 冥想/正念
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="relaxation" value="渐进放松"> 渐进性肌肉放松
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="relaxation" value="散步"> 温和散步
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="relaxation" value="音乐"> 舒缓音乐
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="relaxation" value="其他"> 其他
                            </label>
                        </div>
                        <textarea class="form-control" placeholder="请描述其他有效的放松技巧..." name="relaxation_other"></textarea>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M22 16.92V19.92C22 20.47 21.55 20.92 21 20.92H19C18.45 20.92 18 20.47 18 19.92V16.92C18 16.37 18.45 15.92 19 15.92H21C21.55 15.92 22 16.37 22 16.92ZM16 21.92H4C2.9 21.92 2 21.02 2 19.92V13.92H16V21.92ZM22 5.92H2V7.92H22V5.92ZM16 11.92H2V13.92H16V11.92ZM22 5.92V3.92C22 2.82 21.1 1.92 20 1.92H4C2.9 1.92 2 2.82 2 3.92V5.92H22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    紧急联系人
                </h2>
                <div class="form-group">
                    <label class="form-label">主要紧急联系人</label>
                    <input type="text" class="form-control" placeholder="姓名" name="emergency_name1">
                    <input type="text" class="form-control" style="margin-top: 10px;" placeholder="关系" name="emergency_relation1">
                    <input type="text" class="form-control" style="margin-top: 10px;" placeholder="联系电话" name="emergency_phone1">
                </div>

                <div class="form-group">
                    <label class="form-label">次要紧急联系人</label>
                    <input type="text" class="form-control" placeholder="姓名" name="emergency_name2">
                    <input type="text" class="form-control" style="margin-top: 10px;" placeholder="关系" name="emergency_relation2">
                    <input type="text" class="form-control" style="margin-top: 10px;" placeholder="联系电话" name="emergency_phone2">
                </div>

                <div class="form-group">
                    <label class="form-label">医生/治疗师联系方式</label>
                    <input type="text" class="form-control" placeholder="姓名" name="doctor_name">
                    <input type="text" class="form-control" style="margin-top: 10px;" placeholder="机构" name="doctor_institution">
                    <input type="text" class="form-control" style="margin-top: 10px;" placeholder="联系电话" name="doctor_phone">
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    触发因素避免策略
                </h2>
                <div class="form-group">
                    <label class="form-label">已知的躁狂/轻躁狂触发因素</label>
                    <textarea class="form-control" placeholder="例如：睡眠不足、压力过大、咖啡因摄入、某些社交场合..." name="mania_triggers"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">避免这些触发因素的策略</label>
                    <textarea class="form-control" placeholder="例如：保持规律作息，限制咖啡因摄入，学习压力管理技巧..." name="mania_avoidance"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">已知的抑郁触发因素</label>
                    <textarea class="form-control" placeholder="例如：社交孤立、负面生活事件、季节变化..." name="depression_triggers"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">避免这些触发因素的策略</label>
                    <textarea class="form-control" placeholder="例如：维持社交联系，建立日常活动计划，使用光照疗法..." name="depression_avoidance"></textarea>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="savePlan()">保存应对计划</button>
                    <button class="btn btn-secondary" onclick="clearForm()">清除所有内容</button>
                </div>
            </div>
        </div>

        <div id="view-plan" class="tab-content">
            <div class="card saved-plan" id="saved-plan-container">
                <h2 class="card-title">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16L21 8V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M17 21V13H7V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M7 3V8H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    我的应对计划
                </h2>
                <div id="plan-content"></div>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="editPlan()">编辑计划</button>
                </div>
            </div>

            <div class="card no-plan" id="no-plan">
                <h3>您尚未创建应对计划</h3>
                <p>点击"创建计划"选项卡开始制定您的个性化应对计划</p>
            </div>
        </div>

        <footer>
            <p>双相情感障碍智能管理助手 © 版本 1.0</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadPlan();
        });

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            if (tabName === 'create') {
                document.querySelector('.tab:nth-child(1)').classList.add('active');
                document.getElementById('create-plan').classList.add('active');
            } else {
                document.querySelector('.tab:nth-child(2)').classList.add('active');
                document.getElementById('view-plan').classList.add('active');
                loadPlan();
            }
        }

        function savePlan() {
            const planData = {
                maniaSigns: getCheckedValues('mania_signs'),
                maniaOther: document.querySelector('[name="mania_other"]').value,
                depressionSigns: getCheckedValues('depression_signs'),
                depressionOther: document.querySelector('[name="depression_other"]').value,
                maniaAction: document.querySelector('[name="mania_action"]').value,
                maniaPlan: document.querySelector('[name="mania_plan"]').value,
                depressionAction: document.querySelector('[name="depression_action"]').value,
                depressionPlan: document.querySelector('[name="depression_plan"]').value,
                relaxation: getCheckedValues('relaxation'),
                relaxationOther: document.querySelector('[name="relaxation_other"]').value,
                emergencyName1: document.querySelector('[name="emergency_name1"]').value,
                emergencyRelation1: document.querySelector('[name="emergency_relation1"]').value,
                emergencyPhone1: document.querySelector('[name="emergency_phone1"]').value,
                emergencyName2: document.querySelector('[name="emergency_name2"]').value,
                emergencyRelation2: document.querySelector('[name="emergency_relation2"]').value,
                emergencyPhone2: document.querySelector('[name="emergency_phone2"]').value,
                doctorName: document.querySelector('[name="doctor_name"]').value,
                doctorInstitution: document.querySelector('[name="doctor_institution"]').value,
                doctorPhone: document.querySelector('[name="doctor_phone"]').value,
                maniaTriggers: document.querySelector('[name="mania_triggers"]').value,
                maniaAvoidance: document.querySelector('[name="mania_avoidance"]').value,
                depressionTriggers: document.querySelector('[name="depression_triggers"]').value,
                depressionAvoidance: document.querySelector('[name="depression_avoidance"]').value
            };

            localStorage.setItem('bipolarActionPlan', JSON.stringify(planData));
            alert('应对计划已保存');
            switchTab('view');
            loadPlan();
        }

        function getCheckedValues(name) {
            const checked = [];
            document.querySelectorAll(`[name="${name}"]:checked`).forEach(checkbox => {
                checked.push(checkbox.value);
            });
            return checked;
        }

        function loadPlan() {
            const savedPlan = localStorage.getItem('bipolarActionPlan');
            const planContainer = document.getElementById('saved-plan-container');
            const noPlan = document.getElementById('no-plan');
            const planContent = document.getElementById('plan-content');

            if (savedPlan) {
                const planData = JSON.parse(savedPlan);
                planContainer.style.display = 'block';
                noPlan.style.display = 'none';

                let html = `
                    <div class="plan-section">
                        <h3 class="section-title">预警信号识别</h3>
                        <div class="plan-item">
                            <div class="plan-item-title">躁狂/轻躁狂预警信号</div>
                            <div class="plan-item-content">${formatList(planData.maniaSigns)} ${planData.maniaOther ? '其他: ' + planData.maniaOther : ''}</div>
                        </div>
                        <div class="plan-item">
                            <div class="plan-item-title">抑郁预警信号</div>
                            <div class="plan-item-content">${formatList(planData.depressionSigns)} ${planData.depressionOther ? '其他: ' + planData.depressionOther : ''}</div>
                        </div>
                    </div>

                    <div class="plan-section">
                        <h3 class="section-title">应对措施</h3>
                        <div class="plan-item">
                            <div class="plan-item-title">躁狂/轻躁狂应对</div>
                            <div class="plan-item-content">首要措施: ${planData.maniaAction || '未指定'}<br>${planData.maniaPlan || '无具体行动计划'}</div>
                        </div>
                        <div class="plan-item">
                            <div class="plan-item-title">抑郁应对</div>
                            <div class="plan-item-content">首要措施: ${planData.depressionAction || '未指定'}<br>${planData.depressionPlan || '无具体行动计划'}</div>
                        </div>
                        <div class="plan-item">
                            <div class="plan-item-title">放松技巧</div>
                            <div class="plan-item-content">${formatList(planData.relaxation)} ${planData.relaxationOther ? '其他: ' + planData.relaxationOther : ''}</div>
                        </div>
                    </div>

                    <div class="plan-section">
                        <h3 class="section-title">紧急联系人</h3>
                        <div class="emergency-contacts">
                            <div class="contact-card">
                                <div class="contact-name">${planData.emergencyName1 || '未填写'}</div>
                                <div class="contact-info">关系: ${planData.emergencyRelation1 || '-'}<br>电话: ${planData.emergencyPhone1 || '-'}</div>
                            </div>
                            <div class="contact-card">
                                <div class="contact-name">${planData.emergencyName2 || '未填写'}</div>
                                <div class="contact-info">关系: ${planData.emergencyRelation2 || '-'}<br>电话: ${planData.emergencyPhone2 || '-'}</div>
                            </div>
                            <div class="contact-card">
                                <div class="contact-name">${planData.doctorName || '未填写'}</div>
                                <div class="contact-info">机构: ${planData.doctorInstitution || '-'}<br>电话: ${planData.doctorPhone || '-'}</div>
                            </div>
                        </div>
                    </div>

                    <div class="plan-section">
                        <h3 class="section-title">触发因素避免策略</h3>
                        <div class="plan-item">
                            <div class="plan-item-title">躁狂/轻躁狂触发因素</div>
                            <div class="plan-item-content">${planData.maniaTriggers || '未指定'}</div>
                        </div>
                        <div class="plan-item">
                            <div class="plan-item-title">避免策略</div>
                            <div class="plan-item-content">${planData.maniaAvoidance || '未指定'}</div>
                        </div>
                        <div class="plan-item">
                            <div class="plan-item-title">抑郁触发因素</div>
                            <div class="plan-item-content">${planData.depressionTriggers || '未指定'}</div>
                        </div>
                        <div class="plan-item">
                            <div class="plan-item-title">避免策略</div>
                            <div class="plan-item-content">${planData.depressionAvoidance || '未指定'}</div>
                        </div>
                    </div>
                `;

                planContent.innerHTML = html;
            } else {
                planContainer.style.display = 'none';
                noPlan.style.display = 'block';
            }
        }

        function formatList(items) {
            return items && items.length > 0 ? items.join(', ') : '未指定';
        }

        function clearForm() {
            if (confirm('确定要清除所有已填写的内容吗？')) {
                document.querySelectorAll('input[type="text"], textarea, select').forEach(element => {
                    element.value = '';
                });
                document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = false;
                });
            }
        }

        function editPlan() {
            const savedPlan = localStorage.getItem('bipolarActionPlan');
            if (savedPlan) {
                const planData = JSON.parse(savedPlan);
                
                setCheckedValues('mania_signs', planData.maniaSigns);
                document.querySelector('[name="mania_other"]').value = planData.maniaOther || '';
                setCheckedValues('dep
运行 HTML